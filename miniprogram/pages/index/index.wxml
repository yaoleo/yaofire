<!--é¦–é¡µ - ä»ªè¡¨æ¿-->
<view class="index-container">
  <!-- å¤´éƒ¨ -->
  <view class="header">
    <text class="title">ğŸ’° è´¢å¯Œè¿½è¸ª</text>
    <text class="subtitle">ä½ å¥½ï¼Œ{{userInfo.name}}</text>
  </view>

  <!-- ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-container" wx:if="{{!loading && summary}}">
    <view class="stat-card income">
      <text class="label">æœ¬æœˆæ”¶å…¥</text>
      <text class="value">Â¥{{summary.income}}</text>
    </view>

    <view class="stat-card expense">
      <text class="label">æœ¬æœˆæ”¯å‡º</text>
      <text class="value">Â¥{{summary.expense}}</text>
    </view>

    <view class="stat-card net">
      <text class="label">å‡€æ”¶å…¥</text>
      <text class="value">Â¥{{summary.net}}</text>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- å¿«é€Ÿæ“ä½œ -->
  <view class="quick-actions">
    <view class="action-item" bindtap="goToAddTransaction">
      <text class="icon">â•</text>
      <text class="text">è®°å½•äº¤æ˜“</text>
    </view>

    <view class="action-item" bindtap="goToTransactions">
      <text class="icon">ğŸ“‹</text>
      <text class="text">äº¤æ˜“åˆ—è¡¨</text>
    </view>

    <view class="action-item" bindtap="goToAssets">
      <text class="icon">ğŸ’</text>
      <text class="text">èµ„äº§ç®¡ç†</text>
    </view>

    <view class="action-item" bindtap="goToReports">
      <text class="icon">ğŸ“Š</text>
      <text class="text">æ•°æ®æŠ¥è¡¨</text>
    </view>
  </view>

  <!-- æœ€è¿‘äº¤æ˜“ -->
  <view class="recent-section">
    <view class="section-header">
      <text class="title">æœ€è¿‘äº¤æ˜“</text>
      <navigator url="/pages/transactions/index" class="link">æŸ¥çœ‹æ›´å¤š</navigator>
    </view>

    <view class="recent-list" wx:if="{{recentTransactions && recentTransactions.length}}">
      <view class="list-item" wx:for="{{recentTransactions}}" wx:key="id">
        <view class="item-left">
          <text class="item-title">{{item.category_name}}</text>
          <text class="item-date">{{item.transaction_date}}</text>
        </view>
        <view class="item-right">
          <text class="item-amount {{item.type}}">{{item.type === 'income' ? '+' : '-'}}Â¥{{item.amount}}</text>
        </view>
      </view>
    </view>

    <view class="empty" wx:if="{{!recentTransactions || !recentTransactions.length}}">
      <text>æš‚æ— äº¤æ˜“è®°å½•</text>
    </view>
  </view>

  <!-- æµ®åŠ¨æŒ‰é’® -->
  <view class="fab" bindtap="goToAddTransaction">
    <text>â•</text>
  </view>
</view>
