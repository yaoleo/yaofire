<!-- é¦–é¡µ - è‚¡ç¥¨ä»·æ ¼è¿½è¸ª -->
<view class="page" enable-pull-down-refresh="true">
  <!-- å¤´éƒ¨ -->
  <view class="header">
    <text class="title">ğŸ“ˆ è‚¡ç¥¨è¿½è¸ª</text>
    <text class="subtitle">å®æ—¶è‚¡ç¥¨ä»·æ ¼èµ°åŠ¿</text>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- é”™è¯¯æç¤º -->
  <view class="error-message" wx:if="{{error && !loading}}">
    <text>{{error}}</text>
    <button class="btn-retry" bindtap="loadStocks">é‡è¯•</button>
  </view>

  <!-- è‚¡ç¥¨åˆ—è¡¨ -->
  <view class="stocks-list" wx:if="{{!loading && stocks.length > 0}}">
    <view class="stock-item" wx:for="{{stocks}}" wx:key="id" bindtap="goToDetail" data-symbol="{{item.symbol}}">
      <!-- å·¦ä¾§ï¼šè‚¡ç¥¨ä¿¡æ¯ -->
      <view class="stock-info">
        <view class="stock-header">
          <text class="stock-symbol">{{item.symbol}}</text>
          <text class="stock-name">{{item.name}}</text>
        </view>
        <text class="stock-sector">{{item.sector}}</text>
      </view>

      <!-- å³ä¾§ï¼šä»·æ ¼ä¿¡æ¯ -->
      <view class="stock-price">
        <text class="current-price">${{item.currentPrice.toFixed(2)}}</text>
        <text class="change {{item.changePercent >= 0 ? 'up' : 'down'}}">
          {{item.changePercent >= 0 ? '+' : ''}}{{item.changePercent.toFixed(2)}}%
        </text>
      </view>
    </view>

    <!-- æ›´æ–°æ—¶é—´ -->
    <view class="update-time">
      <text>ä¸Šæ¬¡æ›´æ–°ï¼š{{lastUpdateTime}}</text>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="actions" wx:if="{{!loading}}">
    <button class="btn-primary" bindtap="showTopGainers">
      ğŸš€ æ¶¨å¹…æ’è¡Œ
    </button>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty" wx:if="{{!loading && stocks.length === 0 && !error}}">
    <text>æš‚æ— æ•°æ®</text>
  </view>
</view>
